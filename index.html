<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alerte An√©mie - D√©pister l'an√©mie sans piq√ªre</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Variables et styles g√©n√©raux */
        :root {
            --primary-red: #e74c3c;
            --light-red: #ff6b6b;
            --primary-green: #27ae60;
            --light-green: #2ecc71;
            --primary-blue: #3498db;
            --light-gray: #f5f7fa;
            --medium-gray: #ecf0f1;
            --dark-gray: #7f8c8d;
            --text-color: #2c3e50;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-gray);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .app-container {
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        /* √âcrans de l'application */
        .screen {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            display: none;
        }
        
        .screen.active {
            display: flex;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* En-t√™te de l'application */
        .app-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--medium-gray);
            padding-bottom: 20px;
        }
        
        .logo {
            color: var(--primary-red);
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .slogan {
            color: var(--dark-gray);
            font-size: 1.3rem;
            margin-bottom: 20px;
        }
        
        /* Boutons */
        .btn {
            padding: 16px 24px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .btn-primary {
            background-color: var(--primary-green);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--light-green);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(46, 204, 113, 0.3);
        }
        
        .btn-secondary {
            background-color: var(--primary-blue);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-blue);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--primary-red);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: var(--light-red);
        }
        
        /* Choix du profil */
        .profile-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .profile-option {
            border: 2px solid var(--medium-gray);
            border-radius: var(--border-radius);
            padding: 25px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .profile-option:hover {
            border-color: var(--primary-blue);
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }
        
        .profile-option.selected {
            border-color: var(--primary-green);
            background-color: rgba(46, 204, 113, 0.1);
        }
        
        .profile-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .profile-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        /* Instructions photo */
        .photo-instructions {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin: 30px 0;
        }
        
        .instruction-step {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            border-radius: var(--border-radius);
            background-color: var(--light-gray);
        }
        
        .step-number {
            background-color: var(--primary-blue);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        /* Zone de capture photo avec vraie cam√©ra */
        .photo-capture-area {
            width: 100%;
            height: 400px;
            background-color: #2c3e50;
            border-radius: var(--border-radius);
            margin: 25px 0;
            position: relative;
            overflow: hidden;
        }
        
        #videoElement {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        #canvasElement {
            display: none;
        }
        
        .camera-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            background-color: #2c3e50;
        }
        
        .camera-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }
        
        .capture-btn {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-color: white;
            border: 5px solid var(--medium-gray);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--primary-red);
            z-index: 10;
        }
        
        .camera-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .camera-switch-btn, .flash-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .camera-switch-btn:hover, .flash-btn:hover {
            background-color: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }
        
        /* Liste des sympt√¥mes */
        .symptoms-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        
        .symptom-item {
            padding: 15px;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .symptom-item:hover {
            border-color: var(--primary-blue);
            background-color: rgba(52, 152, 219, 0.05);
        }
        
        .symptom-item.selected {
            border-color: var(--primary-green);
            background-color: rgba(46, 204, 113, 0.1);
        }
        
        /* Animation d'analyse */
        .analysis-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            padding: 40px 0;
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 8px solid var(--medium-gray);
            border-top: 8px solid var(--primary-green);
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
            margin-bottom: 30px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* R√©sultat */
        .result-container {
            text-align: center;
            padding: 30px 0;
        }
        
        .result-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }
        
        .risk-low {
            color: var(--primary-green);
        }
        
        .risk-medium {
            color: #f39c12;
        }
        
        .risk-high {
            color: var(--primary-red);
        }
        
        .risk-title {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .risk-description {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 30px;
            line-height: 1.8;
        }
        
        /* Conseils alimentaires */
        .food-categories {
            margin: 30px 0;
        }
        
        .food-category {
            margin-bottom: 30px;
        }
        
        .category-title {
            font-size: 1.4rem;
            color: var(--primary-green);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--medium-gray);
        }
        
        .food-list {
            list-style-type: none;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
        
        .food-list li {
            padding: 10px 15px;
            background-color: var(--light-gray);
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        /* Historique */
        .history-list {
            margin-top: 25px;
        }
        
        .history-item {
            padding: 20px;
            border-radius: var(--border-radius);
            background-color: var(--light-gray);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-date {
            font-weight: 600;
            color: var(--dark-gray);
        }
        
        .history-risk {
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 600;
            color: white;
        }
        
        /* Indicateur de progression */
        .progress-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }
        
        .progress-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 10%;
            right: 10%;
            height: 4px;
            background-color: var(--medium-gray);
            z-index: 1;
        }
        
        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 2;
            position: relative;
        }
        
        .step-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--medium-gray);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        
        .progress-step.active .step-dot {
            background-color: var(--primary-green);
        }
        
        .step-label {
            font-size: 0.9rem;
            text-align: center;
            font-weight: 600;
            color: var(--dark-gray);
        }
        
        /* Pr√©visualisation des photos */
        .photo-preview-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .photo-preview {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            border: 2px solid var(--medium-gray);
            overflow: hidden;
            position: relative;
        }
        
        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-preview.active {
            border-color: var(--primary-green);
        }
        
        /* Pied de page */
        .app-footer {
            text-align: center;
            padding: 20px;
            color: var(--dark-gray);
            font-size: 0.9rem;
            border-top: 1px solid var(--medium-gray);
            margin-top: 20px;
        }
        
        /* Messages d'erreur */
        .error-message {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--primary-red);
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 15px 0;
            border-left: 4px solid var(--primary-red);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .app-container {
                padding: 15px;
            }
            
            .screen {
                padding: 20px;
            }
            
            .profile-options {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .symptoms-list {
                grid-template-columns: 1fr;
            }
            
            .food-list {
                grid-template-columns: 1fr;
            }
            
            .progress-indicator::before {
                left: 5%;
                right: 5%;
            }
            
            .step-label {
                font-size: 0.8rem;
            }
            
            .photo-capture-area {
                height: 350px;
            }
        }
        
        @media (max-width: 480px) {
            .logo {
                font-size: 2.2rem;
            }
            
            .slogan {
                font-size: 1.1rem;
            }
            
            .profile-options {
                grid-template-columns: 1fr;
            }
            
            .btn {
                padding: 14px 20px;
                font-size: 1rem;
            }
            
            .photo-capture-area {
                height: 300px;
            }
            
            .capture-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .camera-controls {
                top: 10px;
                right: 10px;
            }
            
            .camera-switch-btn, .flash-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Indicateur de progression -->
        <div class="progress-indicator">
            <div class="progress-step active" data-step="1">
                <div class="step-dot">1</div>
                <div class="step-label">Accueil</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-dot">2</div>
                <div class="step-label">Profil</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-dot">3</div>
                <div class="step-label">Consentement</div>
            </div>
            <div class="progress-step" data-step="4">
                <div class="step-dot">4</div>
                <div class="step-label">Photo</div>
            </div>
            <div class="progress-step" data-step="5">
                <div class="step-dot">5</div>
                <div class="step-label">Sympt√¥mes</div>
            </div>
            <div class="progress-step" data-step="6">
                <div class="step-dot">6</div>
                <div class="step-label">R√©sultat</div>
            </div>
        </div>

        <!-- √âcran 1: Accueil -->
        <div class="screen active" id="screen1">
            <div class="app-header">
                <div class="logo">ALERTE AN√âMIE</div>
                <div class="slogan">D√©pister l'an√©mie sans piq√ªre, en 10 secondes</div>
            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <h2 style="margin-bottom: 30px; color: var(--primary-red);">Pr√©-d√©pistage rapide et non invasif</h2>
                <p style="margin-bottom: 40px; font-size: 1.1rem;">
                    Cette application utilise l'intelligence artificielle pour analyser des photos de votre paume, 
                    ongles et ≈ìil afin d'estimer votre risque d'an√©mie.
                </p>
                
                <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 50px;">
                    <button class="btn btn-primary" onclick="nextScreen()">
                        <i class="fas fa-play-circle"></i> Commencer le test
                    </button>
                    
                    <div style="font-size: 0.9rem; color: var(--dark-gray);">
                        <i class="fas fa-info-circle"></i> Test gratuit - Aucune cr√©ation de compte requise
                    </div>
                </div>
            </div>
            
            <div style="margin-top: auto; text-align: center; color: var(--dark-gray); font-size: 0.9rem; padding-top: 30px;">
                <p><i class="fas fa-exclamation-triangle"></i> Cet outil ne remplace pas un diagnostic m√©dical</p>
            </div>
        </div>

        <!-- √âcran 2: Choix du profil -->
        <div class="screen" id="screen2">
            <div class="app-header">
                <h2>Choix du profil utilisateur</h2>
                <p>S√©lectionnez votre profil pour une analyse personnalis√©e</p>
            </div>
            
            <div class="profile-options">
                <div class="profile-option" onclick="selectProfile(this, 'parent')">
                    <div class="profile-icon">üë®‚Äçüë©‚Äçüëß</div>
                    <div class="profile-name">Parent</div>
                </div>
                
                <div class="profile-option" onclick="selectProfile(this, 'health-agent')">
                    <div class="profile-icon">üßë‚Äç‚öïÔ∏è</div>
                    <div class="profile-name">Agent de sant√©</div>
                </div>
                
                <div class="profile-option" onclick="selectProfile(this, 'teenager')">
                    <div class="profile-icon">üßë‚Äçüéì</div>
                    <div class="profile-name">Adolescent</div>
                </div>
                
                <div class="profile-option" onclick="selectProfile(this, 'adult')">
                    <div class="profile-icon">üë®‚Äçüíº</div>
                    <div class="profile-name">Adulte</div>
                </div>
            </div>
            
            <div style="margin-top: auto; display: flex; justify-content: space-between;">
                <button class="btn btn-outline" onclick="prevScreen()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <button class="btn btn-primary" id="continueProfileBtn" onclick="nextScreen()" disabled>
                    Continuer <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- √âcran 3: Information & Consentement -->
        <div class="screen" id="screen3">
            <div class="app-header">
                <h2>Information & Consentement</h2>
            </div>
            
            <div style="background-color: var(--light-gray); padding: 25px; border-radius: var(--border-radius); margin: 20px 0;">
                <h3 style="color: var(--primary-red); margin-bottom: 15px;"><i class="fas fa-exclamation-circle"></i> Important</h3>
                <p style="margin-bottom: 15px; font-size: 1.1rem;">
                    Cette application est un outil de <strong>pr√©-d√©pistage</strong> et <strong>ne remplace pas un avis m√©dical</strong>.
                </p>
                <p style="margin-bottom: 15px;">
                    L'analyse est effectu√©e par intelligence artificielle et fournit une estimation du risque d'an√©mie bas√©e sur l'analyse visuelle de photos.
                </p>
                <p>
                    Vos donn√©es sont trait√©es de mani√®re anonyme et s√©curis√©e. Aucune information personnelle n'est requise.
                </p>
            </div>
            
            <div style="margin: 30px 0;">
                <h3 style="margin-bottom: 15px;">Comment fonctionne l'analyse ?</h3>
                <div class="photo-instructions">
                    <div class="instruction-step">
                        <div class="step-number">1</div>
                        <div>Prenez des photos de votre paume, ongles et ≈ìil selon les instructions</div>
                    </div>
                    <div class="instruction-step">
                        <div class="step-number">2</div>
                        <div>L'IA analyse la coloration et les caract√©ristiques visuelles</div>
                    </div>
                    <div class="instruction-step">
                        <div class="step-number">3</div>
                        <div>Recevez une estimation du risque (faible, moyen, √©lev√©)</div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: auto; display: flex; justify-content: space-between;">
                <button class="btn btn-outline" onclick="prevScreen()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <button class="btn btn-primary" onclick="nextScreen(); initCamera();">
                    J'accepte et je continue <i class="fas fa-check-circle"></i>
                </button>
            </div>
        </div>

        <!-- √âcran 4: Prise de photo avec vraie cam√©ra -->
        <div class="screen" id="screen4">
            <div class="app-header">
                <h2>Prise de photo</h2>
                <p>Suivez les instructions pour chaque photo</p>
            </div>
            
            <div style="margin: 20px 0;">
                <div id="photoInstructions">
                    <h3 style="color: var(--primary-blue); margin-bottom: 15px;">
                        <i class="fas fa-palette"></i> Photo de la paume de la main
                    </h3>
                    <p>Placez votre main √† plat, paume vers le haut, avec un fond neutre et une bonne lumi√®re.</p>
                </div>
                
                <!-- Pr√©visualisation des photos prises -->
                <div class="photo-preview-container" id="photoPreviews">
                    <div class="photo-preview" id="palmPreview">
                        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                            <i class="fas fa-hand-paper"></i>
                        </div>
                    </div>
                    <div class="photo-preview" id="nailsPreview">
                        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                            <i class="fas fa-fingerprint"></i>
                        </div>
                    </div>
                    <div class="photo-preview" id="eyePreview">
                        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                            <i class="fas fa-eye"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Zone de capture avec vraie cam√©ra -->
                <div class="photo-capture-area">
                    <div class="camera-placeholder" id="cameraPlaceholder">
                        <div style="text-align: center;">
                            <div class="camera-icon"><i class="fas fa-camera"></i></div>
                            <div>Chargement de la cam√©ra...</div>
                        </div>
                    </div>
                    <video id="videoElement" autoplay playsinline></video>
                    <canvas id="canvasElement"></canvas>
                    
                    <!-- Contr√¥les de la cam√©ra -->
                    <div class="camera-controls">
                        <button class="camera-switch-btn" id="switchCameraBtn" title="Changer de cam√©ra">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button class="flash-btn" id="flashBtn" title="Flash" style="display: none;">
                            <i class="fas fa-bolt"></i>
                        </button>
                    </div>
                    
                    <!-- Bouton de capture -->
                    <div class="capture-btn" id="captureBtn">
                        <i class="fas fa-camera"></i>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
                    <button class="btn btn-outline" onclick="retakeCurrentPhoto()">
                        <i class="fas fa-redo"></i> Reprendre
                    </button>
                    <button class="btn btn-secondary" id="nextPhotoBtn" onclick="nextPhotoStep()" disabled>
                        Photo suivante <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 30px; background-color: var(--light-gray); padding: 15px; border-radius: var(--border-radius);">
                <h4 style="margin-bottom: 10px;"><i class="fas fa-lightbulb"></i> Conseils pour une bonne photo :</h4>
                <ul style="padding-left: 20px;">
                    <li>Utilisez un fond neutre (mur blanc, tissu uni)</li>
                    <li>√âvitez les ombres sur la zone √† photographier</li>
                    <li>Maintenez l'appareil stable</li>
                    <li>Remplissez au maximum le cadre</li>
                    <li>Pour l'≈ìil : utilisez la cam√©ra frontale (selfie)</li>
                </ul>
            </div>
            
            <div id="cameraError" class="error-message" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i> La cam√©ra n'a pas pu √™tre activ√©e. Veuillez v√©rifier les permissions de votre navigateur.
            </div>
            
            <div style="margin-top: auto; display: flex; justify-content: space-between;">
                <button class="btn btn-outline" onclick="prevScreen(); stopCamera();">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <button class="btn btn-primary" id="continuePhotoBtn" onclick="nextScreen(); stopCamera();" disabled>
                    Passer aux sympt√¥mes <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- √âcran 5: Sympt√¥mes -->
        <div class="screen" id="screen5">
            <div class="app-header">
                <h2>Sympt√¥mes √©ventuels</h2>
                <p>S√©lectionnez les sympt√¥mes que vous ressentez</p>
            </div>
            
            <p style="margin-bottom: 20px;">
                Cette information permet d'affiner l'analyse de risque. S√©lectionnez tous les sympt√¥mes qui s'appliquent.
            </p>
            
            <div class="symptoms-list">
                <div class="symptom-item" onclick="toggleSymptom(this)">Fatigue</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">Vertiges ou √©tourdissements</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">Palpitations</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">Maux de t√™te</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">Essoufflement</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">Respiration rapide</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">√âtourdissements au lever</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">Difficult√©s de concentration</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">P√¢leur de la peau</div>
                <div class="symptom-item" onclick="toggleSymptom(this)">Ongles cassants</div>
            </div>
            
            <div style="margin-top: auto; display: flex; justify-content: space-between;">
                <button class="btn btn-outline" onclick="prevScreen()">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <button class="btn btn-primary" onclick="startRealAnalysis()">
                    <i class="fas fa-robot"></i> Analyser avec l'IA
                </button>
            </div>
        </div>

        <!-- √âcran 6: Analyse en cours -->
        <div class="screen" id="screen6">
            <div class="analysis-container">
                <div class="loading-spinner"></div>
                <h2 style="margin-bottom: 15px;">Analyse IA en cours...</h2>
                <p style="text-align: center; max-width: 500px; margin-bottom: 30px;">
                    Notre intelligence artificielle analyse vos photos et sympt√¥mes.
                    <span id="analysisStep">Connexion √† l'API...</span>
                </p>
                <div id="analysisProgress" style="width: 80%; max-width: 400px; height: 10px; background-color: var(--medium-gray); border-radius: 5px; overflow: hidden; margin-top: 20px;">
                    <div id="progressBar" style="width: 0%; height: 100%; background-color: var(--primary-green); transition: width 0.5s ease;"></div>
                </div>
                <div id="apiStatus" style="margin-top: 20px; font-size: 0.9rem; color: var(--dark-gray);">
                    <i class="fas fa-sync-alt fa-spin"></i> Connexion √† l'API d'analyse...
                </div>
            </div>
        </div>

        <!-- √âcran 7: R√©sultat -->
        <div class="screen" id="screen7">
            <div class="result-container">
                <div class="result-icon risk-medium">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                
                <h2 class="risk-title risk-medium" id="resultTitle">Risque Moyen</h2>
                
                <div class="risk-description" id="resultDescription">
                    L'analyse indique un risque moyen d'an√©mie.
                </div>
                
                <div id="resultDetails" style="margin: 20px 0; padding: 15px; background-color: var(--light-gray); border-radius: var(--border-radius);">
                    <div id="confidenceDisplay" style="margin-bottom: 10px;">
                        <strong>Confiance de l'IA:</strong> <span id="confidenceValue">75%</span>
                    </div>
                    <div id="analysisDetails">
                        <strong>D√©tails:</strong> Analyse bas√©e sur vos sympt√¥mes et profil.
                    </div>
                </div>
                
                <div style="margin: 30px 0; padding: 20px; background-color: rgba(243, 156, 18, 0.1); border-radius: var(--border-radius); border-left: 5px solid #f39c12;">
                    <h3 style="color: #f39c12; margin-bottom: 10px;"><i class="fas fa-stethoscope"></i> Recommandation</h3>
                    <p>Consultez un m√©decin ou un centre de sant√© pour un bilan sanguin (num√©ration formule sanguine) afin de confirmer ou infirmer le diagnostic.</p>
                </div>
                
                <div style="display: flex; justify-content: center; gap: 15px; margin-top: 30px;">
                    <button class="btn btn-secondary" onclick="showAdviceScreen()">
                        <i class="fas fa-apple-alt"></i> Voir les conseils
                    </button>
                    <button class="btn btn-outline" onclick="newTest()">
                        <i class="fas fa-redo"></i> Nouveau test
                    </button>
                </div>
            </div>
        </div>

        <!-- √âcran 8: Conseils & Orientation -->
        <div class="screen" id="screen8">
            <div class="app-header">
                <h2>Conseils & Orientation</h2>
                <p>Recommandations nutritionnelles et m√©dicales</p>
            </div>
            
            <div style="margin: 25px 0;">
                <h3 style="color: var(--primary-green); margin-bottom: 20px;">
                    <i class="fas fa-utensils"></i> Aliments riches en fer
                </h3>
                
                <div class="food-categories">
                    <div class="food-category">
                        <h4 class="category-title">Sources animales (Fer h√©minique, tr√®s bien absorb√©)</h4>
                        <ul class="food-list">
                            <li>Abats : Foie (veau, canard), rognons</li>
                            <li>Viandes : B≈ìuf, agneau, cheval, volaille</li>
                            <li>Poissons et Fruits de mer : Hu√Ætres, moules, sardines</li>
                            <li>≈íufs</li>
                        </ul>
                    </div>
                    
                    <div class="food-category">
                        <h4 class="category-title">Sources v√©g√©tales (Fer non-h√©minique, moins bien absorb√©)</h4>
                        <ul class="food-list">
                            <li>L√©gumineuses : Lentilles, haricots blancs, pois chiches</li>
                            <li>L√©gumes : √âpinards, brocolis, choux de Bruxelles</li>
                            <li>C√©r√©ales : Flocons d'avoine, quinoa, sarrasin</li>
                            <li>Fruits secs : Abricots secs, figues, pruneaux</li>
                            <li>Graines et Noix : Noix de cajou, amandes, graines de s√©same</li>
                        </ul>
                    </div>
                </div>
                
                <div style="background-color: rgba(52, 152, 219, 0.1); padding: 20px; border-radius: var(--border-radius); margin: 30px 0;">
                    <h4 style="color: var(--primary-blue); margin-bottom: 10px;">
                        <i class="fas fa-lightbulb"></i> Astuces pour am√©liorer l'absorption du fer
                    </h4>
                    <ul style="padding-left: 20px;">
                        <li><strong>Ajoutez de la Vitamine C</strong> : Jus d'orange, poivrons, brocolis, persil pendant les repas</li>
                        <li><strong>√âvitez/limitez</strong> : Th√©, caf√©, lait et produits laitiers pendant les repas (ils r√©duisent l'absorption du fer)</li>
                    </ul>
                </div>
                
                <div style="background-color: rgba(231, 76, 60, 0.1); padding: 20px; border-radius: var(--border-radius); margin: 30px 0;">
                    <h4 style="color: var(--primary-red); margin-bottom: 10px;">
                        <i class="fas fa-hospital"></i> Orientation m√©dicale
                    </h4>
                    <p>Si vous pr√©sentez des sympt√¥mes marqu√©s ou un risque √©lev√©, consultez un professionnel de sant√© sans tarder.</p>
                    <button class="btn btn-danger" style="margin-top: 15px;">
                        <i class="fas fa-map-marker-alt"></i> Trouver un centre de sant√©
                    </button>
                </div>
            </div>
            
            <div style="margin-top: auto; display: flex; justify-content: space-between;">
                <button class="btn btn-outline" onclick="goToResult()">
                    <i class="fas fa-arrow-left"></i> Retour au r√©sultat
                </button>
                <button class="btn btn-primary" onclick="newTest()">
                    <i class="fas fa-redo"></i> Nouveau test
                </button>
            </div>
        </div>
    </div>
    
    <div class="app-footer">
        <p>Application "Alerte An√©mie" - Outil de pr√©-d√©pistage non m√©dical</p>
        <p>¬© 2023 - Pour concours de d√©veloppement d'applications sant√©</p>
    </div>

    <script>
        // Variables d'√©tat de l'application
        let currentScreen = 1;
        let selectedProfile = null;
        let photoStep = 1; // 1: paume, 2: ongles, 3: ≈ìil
        let photosTaken = 0;
        const totalPhotos = 3;
        let selectedSymptoms = [];
        let capturedPhotos = {
            palm: null,
            nails: null,
            eye: null
        };
        
        // Variables pour la cam√©ra
        let videoStream = null;
        let currentFacingMode = 'environment'; // 'environment' (arri√®re) ou 'user' (frontale)
        let cameraError = false;
        
        // Configuration de l'API
        const API_CONFIG = {
            // Cette URL sera automatiquement d√©tect√©e sur Vercel
            BASE_URL: window.location.origin,
            ENDPOINTS: {
                ANALYZE: '/api/analyze',
                SIMULATE: '/api/simulate'
            }
        };
        
        // Navigation entre les √©crans
        function showScreen(screenNumber) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            document.getElementById(`screen${screenNumber}`).classList.add('active');
            updateProgressIndicator(screenNumber);
            currentScreen = screenNumber;
        }
        
        function nextScreen() {
            if (currentScreen < 8) {
                showScreen(currentScreen + 1);
            }
        }
        
        function prevScreen() {
            if (currentScreen > 1) {
                showScreen(currentScreen - 1);
            }
        }
        
        function updateProgressIndicator(screenNumber) {
            document.querySelectorAll('.progress-step').forEach(step => {
                step.classList.remove('active');
                const stepNumber = parseInt(step.getAttribute('data-step'));
                if (stepNumber <= screenNumber) {
                    step.classList.add('active');
                }
            });
        }
        
        // Gestion du choix du profil
        function selectProfile(element, profile) {
            document.querySelectorAll('.profile-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            element.classList.add('selected');
            selectedProfile = profile;
            document.getElementById('continueProfileBtn').disabled = false;
        }
        
        // Gestion de la cam√©ra
        async function initCamera() {
            const videoElement = document.getElementById('videoElement');
            const cameraPlaceholder = document.getElementById('cameraPlaceholder');
            const cameraErrorElement = document.getElementById('cameraError');
            
            cameraError = false;
            cameraErrorElement.style.display = 'none';
            
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                showCameraError("Votre navigateur ne supporte pas l'acc√®s √† la cam√©ra.");
                return;
            }
            
            try {
                const constraints = {
                    video: {
                        facingMode: currentFacingMode,
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    },
                    audio: false
                };
                
                videoStream = await navigator.mediaDevices.getUserMedia(constraints);
                
                videoElement.srcObject = videoStream;
                videoElement.style.display = 'block';
                cameraPlaceholder.style.display = 'none';
                
                document.getElementById('captureBtn').style.display = 'flex';
                
                if (photoStep === 3) {
                    switchToFrontCamera();
                }
                
            } catch (error) {
                console.error("Erreur d'acc√®s √† la cam√©ra:", error);
                showCameraError("Impossible d'acc√©der √† la cam√©ra. V√©rifiez les permissions de votre navigateur.");
            }
        }
        
        function stopCamera() {
            if (videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                videoStream = null;
            }
            
            const videoElement = document.getElementById('videoElement');
            videoElement.srcObject = null;
            videoElement.style.display = 'none';
            
            document.getElementById('cameraPlaceholder').style.display = 'flex';
            document.getElementById('captureBtn').style.display = 'none';
        }
        
        function switchCamera() {
            currentFacingMode = currentFacingMode === 'environment' ? 'user' : 'environment';
            stopCamera();
            setTimeout(() => initCamera(), 300);
        }
        
        function switchToFrontCamera() {
            if (currentFacingMode !== 'user') {
                currentFacingMode = 'user';
                stopCamera();
                setTimeout(() => initCamera(), 300);
            }
        }
        
        function showCameraError(message) {
            cameraError = true;
            const cameraErrorElement = document.getElementById('cameraError');
            cameraErrorElement.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${message}`;
            cameraErrorElement.style.display = 'block';
        }
        
        // Capture de photo
        function capturePhoto() {
            if (cameraError || !videoStream) {
                alert("Veuillez d'abord activer la cam√©ra.");
                return;
            }
            
            const videoElement = document.getElementById('videoElement');
            const canvasElement = document.getElementById('canvasElement');
            const context = canvasElement.getContext('2d');
            
            canvasElement.width = videoElement.videoWidth;
            canvasElement.height = videoElement.videoHeight;
            context.drawImage(videoElement, 0, 0, canvasElement.width, canvasElement.height);
            
            const photoData = canvasElement.toDataURL('image/jpeg', 0.8);
            
            if (photoStep === 1) {
                capturedPhotos.palm = photoData;
                updatePhotoPreview('palmPreview', photoData);
            } else if (photoStep === 2) {
                capturedPhotos.nails = photoData;
                updatePhotoPreview('nailsPreview', photoData);
            } else if (photoStep === 3) {
                capturedPhotos.eye = photoData;
                updatePhotoPreview('eyePreview', photoData);
            }
            
            photosTaken++;
            
            document.querySelectorAll('.photo-preview').forEach(preview => {
                preview.classList.remove('active');
            });
            document.getElementById(`${photoStep === 1 ? 'palm' : photoStep === 2 ? 'nails' : 'eye'}Preview`).classList.add('active');
            
            document.getElementById('nextPhotoBtn').disabled = false;
            
            if (photosTaken === totalPhotos) {
                document.getElementById('continuePhotoBtn').disabled = false;
            }
            
            showMessage("Photo captur√©e avec succ√®s!", "success");
        }
        
        function updatePhotoPreview(previewId, photoData) {
            const previewElement = document.getElementById(previewId);
            previewElement.innerHTML = `<img src="${photoData}" alt="Photo captur√©e">`;
        }
        
        function nextPhotoStep() {
            if (photoStep < totalPhotos) {
                photoStep++;
                
                const instructions = document.getElementById('photoInstructions');
                if (photoStep === 2) {
                    instructions.innerHTML = `
                        <h3 style="color: var(--primary-blue); margin-bottom: 15px;">
                            <i class="fas fa-fingerprint"></i> Photo des ongles
                        </h3>
                        <p>Placez votre main √† plat, ongles visibles, avec un fond neutre et une bonne lumi√®re.</p>
                    `;
                    
                    if (currentFacingMode === 'user') {
                        currentFacingMode = 'environment';
                        stopCamera();
                        setTimeout(() => initCamera(), 300);
                    }
                } else if (photoStep === 3) {
                    instructions.innerHTML = `
                        <h3 style="color: var(--primary-blue); margin-bottom: 15px;">
                            <i class="fas fa-eye"></i> Photo de l'≈ìil
                        </h3>
                        <p>Placez-vous face √† la cam√©ra, avec un bon √©clairage. Regardez droit devant vous.</p>
                    `;
                    switchToFrontCamera();
                }
                
                document.getElementById('nextPhotoBtn').disabled = true;
                document.querySelectorAll('.photo-preview').forEach(preview => {
                    preview.classList.remove('active');
                });
            }
        }
        
        function retakeCurrentPhoto() {
            if (photoStep === 1) {
                capturedPhotos.palm = null;
                document.getElementById('palmPreview').innerHTML = `
                    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                        <i class="fas fa-hand-paper"></i>
                    </div>
                `;
            } else if (photoStep === 2) {
                capturedPhotos.nails = null;
                document.getElementById('nailsPreview').innerHTML = `
                    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                        <i class="fas fa-fingerprint"></i>
                    </div>
                `;
            } else if (photoStep === 3) {
                capturedPhotos.eye = null;
                document.getElementById('eyePreview').innerHTML = `
                    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                        <i class="fas fa-eye"></i>
                    </div>
                `;
            }
            
            photosTaken--;
            
            if (photosTaken < totalPhotos) {
                document.getElementById('continuePhotoBtn').disabled = true;
            }
            
            document.getElementById('nextPhotoBtn').disabled = true;
            showMessage("Photo annul√©e. Vous pouvez reprendre une nouvelle photo.", "info");
        }
        
        // Gestion des sympt√¥mes
        function toggleSymptom(element) {
            element.classList.toggle('selected');
            
            const symptom = element.textContent;
            if (element.classList.contains('selected')) {
                selectedSymptoms.push(symptom);
            } else {
                selectedSymptoms = selectedSymptoms.filter(s => s !== symptom);
            }
        }
        
        // ANALYSE R√âELLE AVEC API
        async function startRealAnalysis() {
            showScreen(6);
            
            // Mettre √† jour le message d'analyse
            document.getElementById('analysisStep').textContent = "Pr√©paration des donn√©es...";
            updateProgress(0);
            
            try {
                // Simulation de progression
                updateProgress(10);
                document.getElementById('analysisStep').textContent = "Connexion √† l'API d'IA...";
                document.getElementById('apiStatus').innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Connexion √† l\'API...';
                
                await new Promise(resolve => setTimeout(resolve, 800));
                
                updateProgress(30);
                document.getElementById('analysisStep').textContent = "Envoi des donn√©es d'analyse...";
                document.getElementById('apiStatus').innerHTML = '<i class="fas fa-cloud-upload-alt"></i> Envoi des donn√©es...';
                
                // Appel √† l'API r√©elle
                const analysisResult = await callAIAnalysis();
                
                updateProgress(80);
                document.getElementById('analysisStep').textContent = "Traitement des r√©sultats...";
                document.getElementById('apiStatus').innerHTML = '<i class="fas fa-brain"></i> Traitement IA...';
                
                await new Promise(resolve => setTimeout(resolve, 600));
                
                updateProgress(100);
                document.getElementById('analysisStep').textContent = "Analyse termin√©e!";
                document.getElementById('apiStatus').innerHTML = '<i class="fas fa-check-circle" style="color: var(--primary-green);"></i> Analyse r√©ussie!';
                
                // Afficher le r√©sultat apr√®s un d√©lai
                setTimeout(() => {
                    displayAIResult(analysisResult);
                }, 800);
                
            } catch (error) {
                console.error("Erreur d'analyse:", error);
                document.getElementById('apiStatus').innerHTML = `<i class="fas fa-exclamation-triangle" style="color: var(--primary-red);"></i> Erreur: ${error.message}`;
                
                // En cas d'erreur, utiliser l'API de simulation
                showMessage("Utilisation de l'API de simulation...", "warning");
                setTimeout(() => {
                    callSimulationAPI();
                }, 1500);
            }
        }
        
        function updateProgress(percent) {
            document.getElementById('progressBar').style.width = `${percent}%`;
        }
        
        // Appel √† l'API d'analyse principale
        async function callAIAnalysis() {
            const analysisData = {
                profile: selectedProfile || 'adult',
                symptoms: selectedSymptoms,
                timestamp: new Date().toISOString(),
                // Dans une vraie app, on enverrait les photos ici
                hasPhotos: photosTaken === totalPhotos
            };
            
            const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.ANALYZE}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(analysisData)
            });
            
            if (!response.ok) {
                throw new Error(`Erreur API: ${response.status}`);
            }
            
            return await response.json();
        }
        
        // API de simulation (backup)
        async function callSimulationAPI() {
            try {
                updateProgress(40);
                document.getElementById('analysisStep').textContent = "Utilisation de l'API de simulation...";
                document.getElementById('apiStatus').innerHTML = '<i class="fas fa-microchip"></i> Simulation IA...';
                
                const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.SIMULATE}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        profile: selectedProfile || 'adult',
                        symptoms: selectedSymptoms
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`Erreur simulation: ${response.status}`);
                }
                
                const result = await response.json();
                
                updateProgress(100);
                setTimeout(() => {
                    displayAIResult(result);
                }, 800);
                
            } catch (simulationError) {
                console.error("Erreur simulation:", simulationError);
                // Derni√®re solution: simulation locale
                showMessage("Simulation locale...", "info");
                simulateLocalAnalysis();
            }
        }
        
        // Simulation locale (fallback ultime)
        function simulateLocalAnalysis() {
            updateProgress(50);
            
            // Simulation intelligente bas√©e sur les sympt√¥mes
            let baseRisk;
            const symptomCount = selectedSymptoms.length;
            
            if (symptomCount === 0) baseRisk = 0.2;
            else if (symptomCount <= 2) baseRisk = 0.4;
            else if (symptomCount <= 4) baseRisk = 0.6;
            else baseRisk = 0.8;
            
            // Ajuster selon le profil
            const profileFactors = {
                'parent': 0.9,
                'health-agent': 1.0,
                'teenager': 1.1,
                'adult': 1.0
            };
            
            const adjustedRisk = baseRisk * (profileFactors[selectedProfile] || 1.0);
            
            // D√©terminer le niveau
            let riskLevel, confidence;
            if (adjustedRisk < 0.3) {
                riskLevel = 'low';
                confidence = 85;
            } else if (adjustedRisk < 0.6) {
                riskLevel = 'medium';
                confidence = 75;
            } else {
                riskLevel = 'high';
                confidence = 85;
            }
            
            updateProgress(100);
            
            setTimeout(() => {
                displayAIResult({
                    risk_level: riskLevel,
                    confidence: confidence,
                    details: `Analyse bas√©e sur ${symptomCount} sympt√¥me(s) et profil ${selectedProfile || 'adult'}`,
                    simulated: true
                });
            }, 1000);
        }
        
        // Afficher le r√©sultat de l'IA
        function displayAIResult(result) {
            const riskLevel = result.risk_level; // 'low', 'medium', 'high'
            const confidence = result.confidence || 75;
            const details = result.details || "Analyse compl√©t√©e par notre intelligence artificielle.";
            
            // Mettre √† jour l'affichage
            const resultIcon = document.querySelector('#screen7 .result-icon');
            const resultTitle = document.getElementById('resultTitle');
            const resultDescription = document.getElementById('resultDescription');
            const confidenceValue = document.getElementById('confidenceValue');
            const analysisDetails = document.getElementById('analysisDetails');
            
            let icon, colorClass, title, description;
            
            switch(riskLevel) {
                case 'low':
                    icon = 'fa-smile';
                    colorClass = 'risk-low';
                    title = 'Risque Faible';
                    description = `L'IA d√©tecte un faible risque d'an√©mie.`;
                    break;
                case 'medium':
                    icon = 'fa-exclamation-triangle';
                    colorClass = 'risk-medium';
                    title = 'Risque Moyen';
                    description = `L'IA d√©tecte un risque moyen d'an√©mie.`;
                    break;
                case 'high':
                    icon = 'fa-exclamation-circle';
                    colorClass = 'risk-high';
                    title = 'Risque √âlev√©';
                    description = `L'IA d√©tecte un risque √©lev√© d'an√©mie.`;
                    break;
                default:
                    icon = 'fa-question-circle';
                    colorClass = 'risk-medium';
                    title = 'Analyse Compl√©t√©e';
                    description = 'L\'analyse est termin√©e.';
            }
            
            resultIcon.className = `result-icon ${colorClass}`;
            resultIcon.innerHTML = `<i class="fas ${icon}"></i>`;
            
            resultTitle.className = `risk-title ${colorClass}`;
            resultTitle.textContent = title;
            
            resultDescription.textContent = description;
            confidenceValue.textContent = `${confidence}%`;
            analysisDetails.innerHTML = `<strong>D√©tails:</strong> ${details}`;
            
            showScreen(7);
        }
        
        // Navigation vers les √©crans de conseils
        function showAdviceScreen() {
            showScreen(8);
        }
        
        function goToResult() {
            showScreen(7);
        }
        
        // Nouveau test
        function newTest() {
            selectedProfile = null;
            photoStep = 1;
            photosTaken = 0;
            selectedSymptoms = [];
            capturedPhotos = {
                palm: null,
                nails: null,
                eye: null
            };
            
            stopCamera();
            
            document.querySelectorAll('.profile-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            document.getElementById('continueProfileBtn').disabled = true;
            document.getElementById('continuePhotoBtn').disabled = true;
            document.getElementById('nextPhotoBtn').disabled = true;
            
            document.querySelectorAll('.symptom-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            const instructions = document.getElementById('photoInstructions');
            instructions.innerHTML = `
                <h3 style="color: var(--primary-blue); margin-bottom: 15px;">
                    <i class="fas fa-palette"></i> Photo de la paume de la main
                </h3>
                <p>Placez votre main √† plat, paume vers le haut, avec un fond neutre et une bonne lumi√®re.</p>
            `;
            
            document.getElementById('palmPreview').innerHTML = `
                <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                    <i class="fas fa-hand-paper"></i>
                </div>
            `;
            
            document.getElementById('nailsPreview').innerHTML = `
                <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                    <i class="fas fa-fingerprint"></i>
                </div>
            `;
            
            document.getElementById('eyePreview').innerHTML = `
                <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background-color: var(--medium-gray); color: var(--dark-gray);">
                    <i class="fas fa-eye"></i>
                </div>
            `;
            
            document.getElementById('cameraError').style.display = 'none';
            currentFacingMode = 'environment';
            showScreen(1);
        }
        
        // Message d'information
        function showMessage(message, type) {
            const messageElement = document.createElement('div');
            messageElement.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                animation: slideIn 0.3s ease;
                max-width: 300px;
            `;
            
            if (type === 'success') {
                messageElement.style.backgroundColor = 'var(--primary-green)';
            } else if (type === 'error') {
                messageElement.style.backgroundColor = 'var(--primary-red)';
            } else if (type === 'warning') {
                messageElement.style.backgroundColor = '#f39c12';
            } else {
                messageElement.style.backgroundColor = 'var(--primary-blue)';
            }
            
            messageElement.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation' : type === 'warning' ? 'exclamation-triangle' : 'info'}-circle"></i> ${message}`;
            
            document.body.appendChild(messageElement);
            
            setTimeout(() => {
                messageElement.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(messageElement);
                }, 300);
            }, 3000);
            
            if (!document.querySelector('#messageAnimations')) {
                const style = document.createElement('style');
                style.id = 'messageAnimations';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressIndicator(1);
            
            document.getElementById('captureBtn').addEventListener('click', capturePhoto);
            document.getElementById('switchCameraBtn').addEventListener('click', switchCamera);
            
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                console.warn("L'API de cam√©ra n'est pas support√©e par ce navigateur");
            }
        });
    </script>
</body>
</html>